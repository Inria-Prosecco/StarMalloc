module MainExt

open SizeClass
open Steel.Effect.Atomic
open Steel.Effect
open Steel.Reference
open Steel.Array
module L = Steel.SpinLock


// init emp (ind_sc_vprop size_class16)

assume
val size_class16 : ref size_class_struct
assume
val size_class32 : ref size_class_struct
assume
val size_class64 : ref size_class_struct

unfold
let ind_sc_vprop (r: ref size_class_struct) : vprop =
  vptr r `vdep` size_class_vprop

let lock = new_lock (ind_sc_vprop size_class16)

assume
val size_class16_lock: L.lock (ind_sc_vprop size_class16)
assume
val size_class32_lock: L.lock (ind_sc_vprop size_class32)
assume
val size_class64_lock: L.lock (ind_sc_vprop size_class64)
